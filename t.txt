# ğŸ³ Docker Hands-On Practice with Gitea (Step by Step)

We will use **Gitea** (a lightweight Git hosting tool) to practice all Docker concepts.

---

## Step 1 â€“ Pull Image

```bash
docker pull gitea/gitea:main-nightly
```

â¡ï¸ This downloads the latest **nightly build** of Gitea from Docker Hub.
Think of it like â€œinstallingâ€ the app image locally.

---

## Step 2 â€“ Run Container with Ports & Volumes

```bash
mkdir -p gitea-data
docker run -d --name gitea \
  -p 3000:3000 -p 222:22 \
  -v $(pwd)/gitea-data:/data \
  gitea/gitea:main-nightly
```

â¡ï¸ What this does:

* `-d` â†’ run in background (detached).
* `--name gitea` â†’ give container a name.
* `-p 3000:3000` â†’ web access on [http://localhost:3000](http://localhost:3000).
* `-p 222:22` â†’ SSH access for Git.
* `-v ./gitea-data:/data` â†’ store data **persistently** on your host.

---

## Step 3 â€“ Enter Container & Change Permissions

```bash
docker exec -it gitea /bin/bash
chmod 755 /data
exit
```

â¡ï¸ Here:

* `exec -it` â†’ open a terminal inside container.
* `chmod 755` â†’ change folder permissions.
* `exit` â†’ leave container.

---

## Step 4 â€“ Check Logs & Container Info

```bash
docker logs gitea
docker inspect gitea
```

â¡ï¸

* `logs` â†’ see whatâ€™s happening inside the container.
* `inspect` â†’ detailed JSON with config, volumes, IP, env variables.

---

## Step 5 â€“ Networking

1. Create a custom network:

   ```bash
   docker network create gitea-net
   ```

   â¡ï¸ This is like creating a private LAN for containers.

2. Run Gitea in that network:

   ```bash
   docker run -d --name gitea-net \
     --network gitea-net \
     -p 3001:3000 -p 223:22 \
     -v $(pwd)/gitea-data:/data \
     gitea/gitea:main-nightly
   ```

   â¡ï¸ Now Gitea lives inside `gitea-net`.

3. Add a MySQL DB in same network:

   ```bash
   docker run -d --name gitea-db \
     --network gitea-net \
     -e MYSQL_ROOT_PASSWORD=root \
     -e MYSQL_DATABASE=gitea \
     mysql:5.7
   ```

   â¡ï¸ Both Gitea and MySQL can now â€œtalkâ€ directly inside the same network.

---

## Step 6 â€“ Copy Files Between Host & Container

* Copy from host â†’ container:

  ```bash
  docker cp notes.txt gitea:/data/
  ```
* Copy from container â†’ host:

  ```bash
  docker cp gitea:/etc/gitea/app.ini ./app.ini
  ```

â¡ï¸ Useful when you want to upload/download files.

---

## Step 7 â€“ Use Environment Variables

```bash
docker run -d --name gitea-env \
  -e USER_UID=1000 -e USER_GID=1000 \
  -p 3002:3000 -p 224:22 \
  -v $(pwd)/gitea-data:/data \
  gitea/gitea:main-nightly
```

â¡ï¸ `-e` lets you pass custom settings into the container (like configs).

---

## Step 8 â€“ Apply Resource Limits

```bash
docker run -d --name gitea-limited \
  --memory="512m" --cpus="0.5" \
  -p 3003:3000 \
  -v $(pwd)/gitea-data:/data \
  gitea/gitea:main-nightly
```

â¡ï¸ This restricts the container to **512MB RAM** and **half CPU core**.

---

## Step 9 â€“ Restart Policies

```bash
docker run -d --name gitea-restart \
  --restart always \
  -p 3004:3000 \
  -v $(pwd)/gitea-data:/data \
  gitea/gitea:main-nightly
```

â¡ï¸ `--restart always` makes sure container restarts automatically if system reboots.

---

## Step 10 â€“ Container Lifecycle

* Stop container:

  ```bash
  docker stop gitea
  ```
* Start container:

  ```bash
  docker start gitea
  ```
* Remove container:

  ```bash
  docker rm -f gitea
  ```
* Remove image:

  ```bash
  docker rmi gitea/gitea:main-nightly
  ```

â¡ï¸ These commands let you manage container **life cycle**.

---

# âœ… What You Practiced

* Pull image
* Run with ports + volumes
* Enter container & change permissions
* Logs & inspect
* Networking with DB
* Copy files
* Environment variables
* Resource limits
* Restart policies
* Lifecycle (stop, start, rm, rmi)

With **just Gitea**, you covered almost everything that can appear in a Docker hands-on exam ğŸš€
